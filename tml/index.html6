<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ðŸ¥• KarrotDex</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Arial', sans-serif;
    }

    .background-layer {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -10;
      background-color: black;
    }

    .background-layer::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: url('img/ember-particles.gif');
      background-size: cover;
      opacity: 0.4;
      mix-blend-mode: screen;
      z-index: -2;
    }

    .background-layer::after {
      content: '';
      position: absolute;
      inset: 0;
      background-image: url('img/stake-karrot-bg.png');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      opacity: 0.15;
      z-index: -1;
    }

    .token-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      margin-right: 0.5rem;
    }

    .tab-active {
      background-color: #7c3aed;
      color: white;
    }

    @media (max-width: 768px) {
      .token-section {
        flex-direction: column;
      }
    }
  </style>
</head>
<body class="text-white relative min-h-screen overflow-x-hidden">

  <div class="background-layer"></div>

  <!-- Header -->
  <header class="w-full flex justify-between items-center p-4">
    <div class="flex items-center space-x-2 text-3xl font-bold text-orange-400">
      <span>ðŸ¥•</span><span>KarrotDex</span>
    </div>
    <img src="img/karrot-hex.jpg" alt="Karrot Logo" class="w-12 h-12 rounded-full shadow-lg" />
  </header>

  <!-- Tabs -->
  <div class="flex justify-center mt-6 space-x-4">
    <button class="px-4 py-2 rounded tab-active">Swap</button>
    <button class="px-4 py-2 rounded bg-gray-800 hover:bg-gray-700">Limit</button>
    <button class="px-4 py-2 rounded bg-gray-800 hover:bg-gray-700">Liquidity</button>
  </div>

  <!-- Swap Panel -->
  <main class="flex justify-center items-center p-6">
    <div class="w-full max-w-md bg-gray-900 bg-opacity-80 rounded-xl p-6 shadow-2xl backdrop-blur-md">

      <!-- From Token -->
      <div class="mb-4">
        <label class="block text-sm text-gray-400 mb-1">From</label>
        <div class="flex items-center bg-gray-800 p-3 rounded">
          <img id="fromTokenIcon" class="token-icon" src="img/default-token.png" alt="From Token" />
          <select id="fromToken" class="bg-transparent text-white flex-1 outline-none">
            <option value="0x...">Select a token</option>
            <option value="0xTokenA">Token A</option>
            <option value="0xTokenB">Token B</option>
          </select>
        </div>
        <div class="text-xs mt-1 text-right text-green-400" id="fromBalance">Balance: 0.00</div>
      </div>

      <!-- To Token -->
      <div class="mb-4">
        <label class="block text-sm text-gray-400 mb-1">To</label>
        <div class="flex items-center bg-gray-800 p-3 rounded">
          <img id="toTokenIcon" class="token-icon" src="img/default-token.png" alt="To Token" />
          <select id="toToken" class="bg-transparent text-white flex-1 outline-none">
            <option value="0x...">Select a token</option>
            <option value="0xTokenX">Token X</option>
            <option value="0xTokenY">Token Y</option>
          </select>
        </div>
        <div class="text-xs mt-1 text-right text-green-400" id="toBalance">Balance: 0.00</div>
      </div>

      <!-- Amount -->
      <div class="mb-4">
        <label class="block text-sm text-gray-400 mb-1">Amount</label>
        <input id="swapAmount" type="text" class="w-full p-3 rounded bg-gray-800 text-white" placeholder="0.0" />
      </div>

      <!-- Wallet Override Option -->
      <div class="mb-4">
        <label class="inline-flex items-center space-x-2 text-sm text-gray-300">
          <input type="checkbox" id="useCustomAddress" class="form-checkbox text-purple-600">
          <span>Send to different address</span>
        </label>
        <input type="text" id="customAddress" class="w-full mt-2 p-3 rounded bg-gray-800 text-white hidden" placeholder="0xWallet..." />
      </div>

      <!-- Swap Button -->
      <button id="swapBtn" class="w-full py-3 mt-4 bg-purple-700 hover:bg-purple-600 rounded text-white font-semibold">
        Swap
      </button>
    </div>
  </main>

  <!-- JS Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
  <script>
    const tokenIcons = {
      '0xTokenA': 'img/token-a.png',
      '0xTokenB': 'img/token-b.png',
      '0xTokenX': 'img/token-x.png',
      '0xTokenY': 'img/token-y.png',
    };

    document.getElementById("fromToken").addEventListener("change", (e) => {
      const icon = tokenIcons[e.target.value] || 'img/default-token.png';
      document.getElementById("fromTokenIcon").src = icon;
      // fetchBalance() logic here
    });

    document.getElementById("toToken").addEventListener("change", (e) => {
      const icon = tokenIcons[e.target.value] || 'img/default-token.png';
      document.getElementById("toTokenIcon").src = icon;
      // fetchBalance() logic here
    });

    document.getElementById("useCustomAddress").addEventListener("change", (e) => {
      const input = document.getElementById("customAddress");
      input.classList.toggle("hidden", !e.target.checked);
    });

    async function fetchBalance(address, token) {
      // Add actual Web3 token balance logic here
      // Example dummy values:
      return "123.45";
    }
  </script>
</body>
</html>
